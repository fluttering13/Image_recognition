# 首抽腳本的建立
此處我們主要目的是刷各種麻煩的首抽，其中會用到圖形辨識與操控程式的技巧

圖像辨識的部分我們會使用到pyautogui跟CV2的包

pyautigui主要是控制滑鼠跟鍵盤的程式，同時也有支援簡單的圖像辨識以配合鼠鍵操作

CV2上我們主要是使用大張的圖像辨識，有一些算法可以幫助我們縮短這個過程

＃ 前言

這個鬼東西足足花了我三天的時間，有很多時間都是在建立圖像位置跟定位程式

先有了一個雛形後再慢慢修細節，兩天都在無限重跑繼續抓蟲

例如滑鼠擋到圖標會導致預測結果失真，跟每張圖片用的準確率還要再抓再側

會依照關卡的難度不同，而有不同的難度跟除蟲，跟很多時候有很難掌控的因素

# CV2上手

## CV2安裝
```
pip install opencv-python
```
## 基本code
我們導入cv2包，再讀取圖片
```
import cv2
img_path='./your image path'
img=cv2.imread(img_path)
```
通常（x,y,3）RGB的格式，也支援以下function

IMREAD_UNCHANGE:包含透明度之類的全部的dimension

IMREAD_GREYSCALE:灰階就只有二維的(X,Y)

IMREAD_COLOR:RGB三色的(X,Y,3)

此處我們只做灰階也足夠，但是測試算法的時候使用RGB涵蓋的資訊比較多，也通常會比較準

## 顯示圖片
以下是怎麼顯示圖片的例子
```
cv2.imshow('window's name', img)
cv2.delay(0) ## stop the window vanishing
cv2.destoryWindow('window's name') ## release after displying
```
cv2本身有支援matplot
```
import matplotlib.pyplot as plt
plt.imshow(img)
plt.show()
```
## 影像辨識
### 單模辨識
### 多模辨識
＃ 成果
策略：CODE主要分兩塊，一塊是根據圖片辨識來按按鈕，另外一塊是如果圖片辨識失敗就點預先設好的絕對位置。

PS:絕對位置不好設就先抓其他的絕對位置在抓相對位置
## 跑關
這邊應該是最花時間跟心思的，要不斷測試按鈕能不能按跟人物能不能跑到位置上

要考慮一些留白或是多餘的動作來避免最糟糕的事情發生
## 自動轉蛋與辨識UR
這部分是最舒服的，由於遊戲內有無限首刷，操作過程就是幾個按鈕的事情
這邊會建立辨識場景，辨識是否在抽選結果頁面，不在的話就點來跳頁
可以根據個人需求設置停止點
4張以上：100至200重刷抽出一次
5張以上：1000次重刷抽出一次
四張是比較可以接受的範圍抽一次大約需要40秒,大概幾個小時就可以收竿一次，看是不是自己目標的角色
## Line通知
這邊是附加功能，先進到Line notify 頁面登入設置權杖
再利用以下的code就可以傳訊息給自己嚕！
